<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image Tracking mit MindAR</title>
  
  <!-- A-Frame & MindAR.js -->
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.1/dist/mindar-image-aframe.prod.js"></script>
  
  <style>
      body { margin: 0; overflow: hidden; }
      #startButton { 
         position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
         padding: 10px 20px; font-size: 18px; z-index: 1000; cursor: pointer;
      }
  </style>
</head>
<body>
  <!-- Test: Kamera direkt anzeigen -->
  <video id="cameraFeed" autoplay playsinline style="position: absolute; top: 10px; left: 10px; width: 200px; z-index: 1000; background: black;"></video>

  <button id="startButton">Start AR</button>

  <a-scene id="arScene" style="display: none;" 
           mindar-image="imageTargetSrc: https://oldnovize.github.io/targets.mind; debugUIEnabled: true;"
           embedded color-space="sRGB"
           vr-mode-ui="enabled: false"
           device-orientation-permission-ui="enabled: true">
      
      <a-entity mindar-image-target="targetIndex: 0">
          <a-text value="Check it out!" 
                  color="red" 
                  align="center" 
                  width="2" 
                  position="0 0.3 0" 
                  scale="0.5 0.5 0.5">
          </a-text>
      </a-entity>

      <a-camera position="0 0 0"></a-camera>
  </a-scene>

  <script>
    // Kamera-Test: Versuche ein Video-Feed von der Kamera anzuzeigen
    async function testCamera() {
      try {
        let stream = await navigator.mediaDevices.getUserMedia({ video: true });
        document.getElementById("cameraFeed").srcObject = stream;
        console.log("✅ Kamera erfolgreich gestartet!");
      } catch (err) {
        console.error("❌ Kamera-Fehler:", err);
      }
    }

    testCamera();

    // Start-Button für iOS
    document.getElementById("startButton").addEventListener("click", async function() {
        document.getElementById("arScene").style.display = "block";
        this.style.display = "none";
    });
  </script>

</body>
</html>
